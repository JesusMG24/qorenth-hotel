---
import { getLangFromUrl, useTranslations } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<footer class="bg-gray-50 text-gray-800 border-t border-gray-200">
  <!-- Main Footer Content -->
  <div class="p-8 md:p-12 xl:px-100 xl:bg-gray-100">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <!-- Hotel Information -->
      <div class="flex flex-col gap-4">
        <h3 class="text-black font-bold text-xl">{t("footer.hotel.name")}</h3>
        <div class="flex flex-col gap-2 text-sm text-gray-600">
          <p>{t("footer.address.line1")}</p>
          <p>{t("footer.address.line2")}</p>
          <p>{t("footer.address.line3")}</p>
        </div>
        <div class="flex flex-col gap-2 text-sm">
          <a
            href="tel:+529991234567"
            class="hover:text-yellow-700 transition-colors text-gray-700"
          >
            {t("contact.phone")}
          </a>
          <a
            href="mailto:hotelmerida@hoteles.com"
            class="hover:text-yellow-700 transition-colors text-gray-700"
          >
            {t("contact.email")}
          </a>
        </div>
      </div>

      <!-- Quick Links -->
      <div class="flex flex-col gap-4">
        <h4 class="text-black font-semibold text-lg">
          {t("footer.links.title")}
        </h4>
        <div class="grid grid-cols-1 gap-2 text-sm">
          <a
            href="#habitaciones"
            class="hover:text-yellow-700 transition-colors text-gray-600"
            >{t("nav.rooms")}</a
          >
          <a
            href="#residencias"
            class="hover:text-yellow-700 transition-colors text-gray-600"
            >{t("nav.residences")}</a
          >
          <a
            href="#gastronomia"
            class="hover:text-yellow-700 transition-colors text-gray-600"
            >{t("nav.gastronomy")}</a
          >
          <a
            href="#eventos"
            class="hover:text-yellow-700 transition-colors text-gray-600"
            >{t("nav.events")}</a
          >
          <a
            href="#spa"
            class="hover:text-yellow-700 transition-colors text-gray-600"
            >{t("nav.spa")}</a
          >
          <a
            href="#tours"
            class="hover:text-yellow-700 transition-colors text-gray-600"
            >{t("nav.tours")}</a
          >
        </div>
      </div>

      <!-- Services & Social -->
      <div class="flex flex-col gap-4">
        <h4 class="text-black font-semibold text-lg">
          {t("footer.services.title")}
        </h4>
        <div class="grid grid-cols-1 gap-2 text-sm text-gray-600">
          <p>{t("footer.services.concierge")}</p>
          <p>{t("footer.services.room")}</p>
          <p>{t("footer.services.laundry")}</p>
          <p>{t("footer.services.transfer")}</p>
          <p>{t("footer.services.wifi")}</p>
          <p>{t("footer.services.parking")}</p>
        </div>

        <!-- Social Media -->
        <div class="mt-4">
          <h5 class="text-black font-semibold mb-3">{t("social.title")}</h5>
          <div class="flex gap-4">
            <a
              href="https://www.instagram.com/"
              target="_blank"
              class="w-10 h-10 bg-gray-200 hover:bg-yellow-600 hover:text-white rounded-full flex items-center justify-center transition-colors text-gray-600"
              aria-label="Instagram"
            >
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path
                  d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.621 5.367 11.988 11.988 11.988s11.987-5.367 11.987-11.988C24.004 5.367 18.637.001 12.017.001zm5.568 16.108c-.492.5-1.096.9-1.804 1.193-.708.293-1.456.44-2.24.44h-3.082c-.784 0-1.532-.147-2.24-.44-.708-.293-1.312-.693-1.804-1.193-.492-.5-.892-1.104-1.185-1.812-.293-.708-.44-1.456-.44-2.24V8.974c0-.784.147-1.532.44-2.24.293-.708.693-1.312 1.185-1.812.492-.5 1.096-.9 1.804-1.193.708-.293 1.456-.44 2.24-.44h3.082c.784 0 1.532.147 2.24.44.708.293 1.312.693 1.804 1.193.492.5.892 1.104 1.185 1.812.293.708.44 1.456.44 2.24v3.082c0 .784-.147 1.532-.44 2.24-.293.708-.693 1.312-1.185 1.812z"
                ></path>
                <path
                  d="M12.017 7.075c-2.717 0-4.912 2.196-4.912 4.912s2.196 4.912 4.912 4.912 4.912-2.196 4.912-4.912-2.196-4.912-4.912-4.912zm0 8.104c-1.76 0-3.192-1.432-3.192-3.192s1.432-3.192 3.192-3.192 3.192 1.432 3.192 3.192-1.432 3.192-3.192 3.192z"
                ></path>
                <circle cx="16.948" cy="7.036" r="1.156"></circle>
              </svg>
            </a>
            <a
              href="https://www.facebook.com/"
              target="_blank"
              class="w-10 h-10 bg-gray-200 hover:bg-yellow-600 hover:text-white rounded-full flex items-center justify-center transition-colors text-gray-600"
              aria-label="Facebook"
            >
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path
                  d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"
                ></path>
              </svg>
            </a>
            <a
              href="https://www.tripadvisor.com/"
              target="_blank"
              class="w-10 h-10 bg-gray-200 hover:bg-yellow-600 hover:text-white rounded-full flex items-center justify-center transition-colors text-gray-600"
              aria-label="TripAdvisor"
            >
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path
                  d="M12.006 4.295c-2.67 0-5.338.784-7.645 2.353H1.398l1.847 1.849c-1.662 1.159-2.754 3.056-2.754 5.219 0 3.523 2.865 6.387 6.388 6.387 2.12 0 4.002-1.039 5.162-2.64 1.16 1.601 3.042 2.64 5.162 2.64 3.523 0 6.387-2.864 6.387-6.387 0-2.163-1.092-4.06-2.754-5.219L22.683 6.648h-2.962C17.414 5.079 14.746 4.295 12.006 4.295z"
                ></path>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Newsletter Signup -->
  <div class="bg-black text-white p-6">
    <div
      class="max-w-4xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4"
    >
      <div class="text-center md:text-left">
        <h4 class="font-bold text-lg">{t("footer.newsletter.title")}</h4>
        <p class="text-sm">{t("footer.newsletter.description")}</p>
      </div>
      <div class="flex w-full md:w-auto gap-2">
        <input
          type="email"
          placeholder={t("footer.newsletter.placeholder")}
          class="flex-1 md:w-64 px-4 py-2 rounded-none border border-white bg-transparent text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-white"
        />
        <button
          class="bg-white text-black font-semibold px-6 py-2 hover:bg-gray-100 transition-colors"
        >
          {t("footer.newsletter.button")}
        </button>
      </div>
    </div>
  </div>

  <!-- Bottom Bar -->
  <div class="bg-white border-t border-gray-200 p-4">
    <div
      class="max-w-4xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-gray-500"
    >
      <div class="flex flex-col md:flex-row gap-4">
        <p>{t("footer.copyright")}</p>
        <div class="flex gap-4">
          <a href="#" class="hover:text-yellow-700 transition-colors"
            >{t("footer.privacy")}</a
          >
          <a href="#" class="hover:text-yellow-700 transition-colors"
            >{t("footer.terms")}</a
          >
          <a href="#" class="hover:text-yellow-700 transition-colors"
            >{t("footer.cookies")}</a
          >
        </div>
      </div>
    </div>
  </div>

  <!-- Back to Top Button -->
  <button
    id="back-to-top"
    class="fixed bottom-6 right-6 bg-yellow-600 text-white w-12 h-12 rounded-full shadow-lg hover:bg-yellow-500 transition-all duration-300 opacity-0 invisible"
    aria-label={t("footer.back.to.top")}
  >
    â†‘
  </button>
</footer>

<script>
  (function (): void {
    // Back to top functionality
    const backToTopButton: HTMLElement | null =
      document.getElementById("back-to-top");

    window.addEventListener("scroll", (): void => {
      if (window.pageYOffset > 300) {
        backToTopButton?.classList.remove("opacity-0", "invisible");
        backToTopButton?.classList.add("opacity-100", "visible");
      } else {
        backToTopButton?.classList.add("opacity-0", "invisible");
        backToTopButton?.classList.remove("opacity-100", "visible");
      }
    });

    backToTopButton?.addEventListener("click", (): void => {
      window.scrollTo({
        top: 0,
        behavior: "smooth",
      });
    });

    // Newsletter form functionality
    const newsletterForm: HTMLInputElement | null = document.querySelector(
      'input[type="email"]'
    );
    const subscribeButton: HTMLElement | null = document.querySelector(
      'button[class*="bg-white text-black"]'
    );

    subscribeButton?.addEventListener("click", (e: Event): void => {
      e.preventDefault();
      const email: string = newsletterForm?.value || "";

      if (email && email.includes("@")) {
        if (newsletterForm) {
          newsletterForm.value = "";
        }
      }
    });

    // Also handle Enter key on email input
    newsletterForm?.addEventListener("keypress", (e: KeyboardEvent): void => {
      if (e.key === "Enter") {
        subscribeButton?.click();
      }
    });
  })();
</script>
